!function(e,n){let t=n(e);"object"==typeof exports&&"string"!=typeof exports.nodeName?module.exports=t:"_hyperscript"in e&&e._hyperscript.use(t)}("undefined"!=typeof self?self:this,e=>{function n(e){return e.replace(/(?:^|\n)([^@]*)@?/gm,function(e,n){return"\ncall meta.__ht_template_result.push(`"+(" "+n).replace(/([^\\])\$\{/g,"$1$${escape html ").substring(1)+"`)\n"})}return e=>{function t(n,t){var r=[];let a=Object.assign({},t);return a.meta=Object.assign({__ht_template_result:r},t.meta),e.evaluate(n,a),r.join("")}function r(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\x22/g,"&quot;").replace(/\x27/g,"&#039;")}e.addCommand("render",function(r,a,i){if(i.matchToken("render")){var u=r.requireElement("expression",i),o={};return i.matchToken("with")&&(o=r.parseElement("namedArgumentList",i)),{args:[u,o],op:function(r,i,o){if(!(i instanceof Element))throw Error(u.sourceFor()+" is not an element");let s=e.internals.runtime.makeContext();return s.locals=o,r.result=t(n(i.innerHTML),s),a.findNext(this,r)}}}}),e.addLeafExpression("escape",function(e,n,t){if(t.matchToken("escape")){var a=t.matchTokenType("IDENTIFIER").value,i=t.matchToken("unescaped");return{args:[e.requireElement("expression",t)],op:function(e,n){if(i)return n;if(void 0===n)return"";if("html"===a)return r(n);throw Error("Unknown escape: "+a)},evaluate:function(e){return n.unifiedEval(this,e)}}}})}});
